{"ast":null,"code":"import _regeneratorRuntime from\"/Users/dukeyeom/Documents/COP4331BigProject/ChecksAndBalances/WebApp/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/dukeyeom/Documents/COP4331BigProject/ChecksAndBalances/WebApp/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/dukeyeom/Documents/COP4331BigProject/ChecksAndBalances/WebApp/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";//import React from 'react';\nimport React,{useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var baseURL='/api';// const baseURL = 'http://localhost:5001/api';\nfunction Login(){var loginName;var loginPassword;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var doLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var obj,js,response,res,user;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();obj={login:loginName.value,password:loginPassword.value};js=JSON.stringify(obj);//alert(js);\n_context.prev=3;_context.next=6;return fetch(\"\".concat(baseURL,\"/login\"),{method:'POST',body:js,headers:{'Content-Type':'application/json'}});case 6:response=_context.sent;_context.t0=JSON;_context.next=10;return response.text();case 10:_context.t1=_context.sent;res=_context.t0.parse.call(_context.t0,_context.t1);if(res.id<=0){setMessage('User/Password combination incorrect');}else{user={firstName:res.firstName,lastName:res.lastName,id:res.id};localStorage.setItem('user_data',JSON.stringify(user));setMessage('');window.location.href='/cards';}_context.next=19;break;case 15:_context.prev=15;_context.t2=_context[\"catch\"](3);alert(_context.t2.toString());return _context.abrupt(\"return\");case 19:case\"end\":return _context.stop();}},_callee,null,[[3,15]]);}));return function doLogin(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{id:\"loginDiv\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:doLogin,children:[/*#__PURE__*/_jsx(\"span\",{id:\"inner-title\",children:\"PLEASE LOG IN\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"loginName\",placeholder:\"Username\",ref:function ref(c){return loginName=c;}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"loginPassword\",placeholder:\"Password\",ref:function ref(c){return loginPassword=c;}}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",id:\"loginButton\",class:\"buttons\",value:\"Do It\",onClick:doLogin})]}),/*#__PURE__*/_jsx(\"span\",{id:\"loginResult\",children:message})]});};export default Login;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","baseURL","Login","loginName","loginPassword","_useState","_useState2","_slicedToArray","message","setMessage","doLogin","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","obj","js","response","res","user","wrap","_callee$","_context","prev","next","preventDefault","login","value","password","JSON","stringify","fetch","concat","method","body","headers","sent","t0","text","t1","parse","call","id","firstName","lastName","localStorage","setItem","window","location","href","t2","alert","toString","abrupt","stop","_x","apply","arguments","children","onSubmit","type","placeholder","ref","c","class","onClick"],"sources":["/Users/dukeyeom/Documents/COP4331BigProject/ChecksAndBalances/WebApp/frontend/src/components/Login.js"],"sourcesContent":["//import React from 'react';\nimport React, { useState } from 'react';\nconst baseURL = '/api';\n// const baseURL = 'http://localhost:5001/api';\n\nfunction Login()\n{\n    var loginName;\n    var loginPassword;\n\n    const [message,setMessage] = useState('');\n\n    const doLogin = async event => \n    {\n        event.preventDefault();\n\n        var obj = {login:loginName.value,password:loginPassword.value};\n        var js = JSON.stringify(obj);\n        //alert(js);\n        try\n        {    \n            const response = await fetch(`${baseURL}/login`,\n                {method:'POST',body:js,headers:{'Content-Type': 'application/json'}});\n\n            var res = JSON.parse(await response.text());\n\n            if( res.id <= 0 )\n            {\n                setMessage('User/Password combination incorrect');\n            }\n            else\n            {\n                var user = {firstName:res.firstName,lastName:res.lastName,id:res.id}\n                localStorage.setItem('user_data', JSON.stringify(user));\n\n                setMessage('');\n                window.location.href = '/cards';\n            }\n        }\n        catch(e)\n        {\n            alert(e.toString());\n            return;\n        }    \n    };\n\n\n\n    return(\n      <div id=\"loginDiv\">\n        <form onSubmit={doLogin}>\n        <span id=\"inner-title\">PLEASE LOG IN</span><br />\n        <input type=\"text\" id=\"loginName\" placeholder=\"Username\" \n            ref={(c) => loginName = c} />\n        <input type=\"password\" id=\"loginPassword\" placeholder=\"Password\" \n            ref={(c) => loginPassword = c} />\n\n        <input type=\"submit\" id=\"loginButton\" class=\"buttons\" value = \"Do It\"\n          onClick={doLogin} />\n        </form>\n        <span id=\"loginResult\">{message}</span>\n     </div>\n    );\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}